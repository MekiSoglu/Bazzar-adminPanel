<div class="container">
  <h2>âœï¸ Ä°ÅŸlem TanÄ±mlama</h2>

  <!-- âœ… Ä°ÅŸlem AdÄ± GiriÅŸi -->
<!-- âœ… Ä°ÅŸlem AdÄ± ve Create Butonu -->
<div class="operation-name">
  <h3>ğŸ“ Ä°ÅŸlem AdÄ±</h3>
  <input type="text" [(ngModel)]="operationName" placeholder="Ä°ÅŸlem adÄ±nÄ± girin..." />
  <button (click)="createOperation()">âœ… Create</button>
</div>


  <div class="drag-drop-container">
    <!-- âœ… 1. BÃ¶lÃ¼m: Mevcut Tablolar -->
    <div cdkDropList [cdkDropListData]="tables" class="tables-list" (cdkDropListDropped)="dropTable($event)">
      <h3>ğŸ“Œ Tablolar</h3>
      <div *ngFor="let table of tables" cdkDrag class="table-item">
        {{ table }}
      </div>
    </div>

    <!-- âœ… 2. BÃ¶lÃ¼m: SeÃ§ilen Tablonun KolonlarÄ± -->
    <div cdkDropList [cdkDropListData]="tableColumns[selectedTable]" class="columns-list" (cdkDropListDropped)="dropColumn($event)">
      <h3>ğŸ›  SeÃ§ilen Tablo: {{ selectedTable || 'HenÃ¼z SeÃ§ilmedi' }}</h3>
      <div *ngFor="let column of tableColumns[selectedTable]" cdkDrag class="column-item">
        {{ column }}
      </div>
    </div>

    <!-- âœ… 3. BÃ¶lÃ¼m: Veri GiriÅŸi AlanÄ± -->
    <div class="input-area">
      <h3>ğŸ“¥ Veri GiriÅŸi</h3>
      <input type="text" [(ngModel)]="newInputName" placeholder="Girdi adÄ± girin..." />
      <button (click)="addNewInput()">â• Ekle</button>

      <!-- âœ… Yeni eklenen giriÅŸ alanlarÄ± sÃ¼rÃ¼klenebilir olacak -->
      <div cdkDropList [cdkDropListData]="inputFields" class="input-list" (cdkDropListDropped)="dropInput($event)">
        <div *ngFor="let input of inputFields" cdkDrag class="input-item">
          Input: {{ input.name }}
        </div>
      </div>
    </div>

    <!-- âœ… 4. BÃ¶lÃ¼m: Ä°ÅŸlem AlanÄ± -->
    <div cdkDropList [cdkDropListData]="selectedColumns" class="selected-area" (cdkDropListDropped)="dropToSelected($event)">
      <h3>ğŸ¯ Ä°ÅŸlem AlanÄ±</h3>
      <div *ngFor="let item of selectedColumns" class="selected-item">
        {{ item.table ? (item.table + " - " + item.column) : "Input: " + item.name }}

        <!-- âœ… EÄŸer bu bir input deÄŸilse iÅŸlem seÃ§eneklerini gÃ¶ster -->
        <select *ngIf="item.table" [(ngModel)]="item.operation">
          <option value="increase">ArttÄ±r</option>
          <option value="decrease">Azalt</option>
          <option value="update">GÃ¼ncelle</option>
        </select>

        <!-- âœ… EÄŸer bu bir input ise sadece veri tipini seÃ§tir -->
        <select *ngIf="!item.table" [(ngModel)]="item.dataType">
          <option value="integer">Integer</option>
          <option value="string">String</option>
          <option value="boolean">Boolean</option>
          <option value="date">Tarih</option>
        </select>
      </div>
    </div>
  </div>
</div>
