<div class="islemler-container">
  <h2>ğŸ“‹ {{ islemDetay?.islemAdi }} DetaylarÄ±</h2>

  <!-- âœ… Tablolar iÃ§in seÃ§im alanlarÄ± -->
  <div *ngFor="let table of islemDetay?.islemJson?.tables">
    <div class="table-selector" (click)="toggleTable(table)">
      ğŸ“Œ {{ table }}
    </div>

    <div *ngIf="selectedTable === table" class="table-data">
      <h3>ğŸ“‚ {{ table }} Verileri</h3>

      <table>
        <thead>
          <tr>
            <th *ngFor="let header of tableHeaders[table]">{{ header }}</th>
            <th>SeÃ§</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of tableData[table]">
            <td *ngFor="let header of tableHeaders[table]">
              {{ header.includes('date') ? formatDate(row[header]) : row[header] }}
            </td>
            <td>
              <button class="select-btn" (click)="selectRow(table, row)">âœ…</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- âœ… SeÃ§ilen veriler bÃ¶lÃ¼mÃ¼ (Her tablo iÃ§in ayrÄ±) -->
  <div *ngFor="let table of Object.keys(selectedRowsByTable)" class="selected-items">
    <h3>ğŸ“Œ SeÃ§imlerim - {{ table }}</h3>

<table *ngIf="tableHeaders[table]?.length && selectedRowsByTable[table]?.length">
  <thead>
    <tr>
      <th *ngFor="let header of tableHeaders[table]">{{ header }}</th>
      <th>Sil</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of selectedRowsByTable[table]; let i = index">
      <td *ngFor="let header of tableHeaders[table]">
        {{ header.includes('date') ? formatDate(row[header]) : row[header] }}
      </td>
      <td>
        <button class="remove-btn" (click)="removeSelection(table, i)">âŒ</button>
      </td>
    </tr>
  </tbody>
</table>

  </div>

<div class="inputs-container" *ngIf="islemDetay?.islemJson?.inputs?.length">
  <h3>ğŸ“ Girdi AlanlarÄ±</h3>
  <div *ngFor="let input of islemDetay?.islemJson?.inputs">
    <label>{{ input?.name || 'Bilinmeyen Alan' }}</label>
    <input [type]="getInputType(input?.dataType || 'text')" [(ngModel)]="inputValues[input?.name || 'unknown']" />
  </div>
</div>

  <!-- âœ… Ä°ÅŸlemi Tamamlama Butonu -->
  <button (click)="completeOperation()">âœ… Ä°ÅŸlemi Bitir</button>
</div>
